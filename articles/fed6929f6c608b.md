---
title: "ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼ã‹ã‚‰å­¦ã¶X11ã®screenã¨display"
emoji: "ğŸ–¥ï¸"
type: "tech"
topics: ["X11", "Linux", "WindowManager"]
published: false
canonical: "https://d-matsui.github.io/posts/x11-multimonitor/"
---

> ã“ã®è¨˜äº‹ã¯[å€‹äººãƒ–ãƒ­ã‚°](https://d-matsui.github.io/posts/x11-multimonitor/)ã§å…¬é–‹ã—ãŸå†…å®¹ã‚’å†ç·¨é›†ã—ãŸã‚‚ã®ã§ã™ã€‚

## ã“ã®è¨˜äº‹ã«ã¤ã„ã¦

X11 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã‚„ã€X11ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«èˆˆå‘³ãŒã‚ã‚‹äººå‘ã‘ã«ã€screen, displayã®æ¦‚å¿µã¨ãã®æ­´å²ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸè¨˜äº‹ã§ã™ã€‚

ç¾ä»£ã®X11ã§ã¯ã€ãƒ¢ãƒ‹ã‚¿ãƒ¼ãŒè¤‡æ•°ã‚ã£ã¦ã‚‚ `screen_number` ã¯ 0 ã‚’ä½¿ã„ã¾ã™ã€‚screen ã¯ã€Œç‰©ç†ãƒ¢ãƒ‹ã‚¿ãƒ¼ã€ã¨å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã«ã€å®Ÿéš›ã«ã¯ç•°ãªã‚‹æ‰±ã„ã«ãªã£ã¦ã„ã¾ã™ã€‚

ã“ã®èƒŒæ™¯ã«ã¯ã€X11ã®ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œã®èˆˆå‘³æ·±ã„æ­´å²ãŒã‚ã‚Šã¾ã™ã€‚screen ã¨ã„ã†æ¦‚å¿µã¯å…ƒã€…ç‰©ç†ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’æŒ‡ã—ã¦ã„ã¾ã—ãŸãŒã€screen é–“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•ãŒã§ããªã„ã¨ã„ã†å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã€Xineramaã€RandR ã¨ã„ã£ãŸæŠ€è¡“ã®ç™»å ´ã¨ã¨ã‚‚ã«ã€ãã®æ„å‘³ãŒå¤‰åŒ–ã—ã¦ãã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œã®æ­´å²ã‚’è¿½ã„ãªãŒã‚‰ã€screen ã¨ display ã®å®šç¾©ã€ãã—ã¦ç¾ä»£ã®X11ã«è‡³ã‚‹ã¾ã§ã®æŠ€è¡“çš„èƒŒæ™¯ã‚’å€‹äººçš„ã«ã¾ã¨ã‚ã¾ã™ã€‚

---

## X11ã® screen ã¨ display ã¨ã¯

X11ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã€`screen` ã‚„ `display` ã¨ã„ã£ãŸç”¨èªã«å‡ºä¼šã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯X11ç‹¬ç‰¹ã®æ„å‘³ã‚’æŒã¡ã€ç›´æ„Ÿçš„ã«ç†è§£ã—ã«ãã„ç”¨èªã§ã™ã€‚

[Xlib - C Language X Interface](https://www.x.org/releases/X11R7.6/doc/libX11/specs/libX11/libX11.html) ã®ä»•æ§˜ã‚’è¦‹ã‚‹ã¨ã€screen ã¨ display ã®å®šç¾©ãŒã‚ã‹ã‚Šã‚„ã™ãæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

> A screen is a physical monitor and hardware that can be color, grayscale, or monochrome.

screen ã¯ç‰©ç†çš„ãªãƒ¢ãƒ‹ã‚¿ãƒ¼ã®ã“ã¨ã§ã™ã€‚ãŸã¨ãˆã°ã€ãƒ©ãƒƒãƒ—ãƒˆãƒƒãƒ—ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼ã¨å¤–éƒ¨ãƒ¢ãƒ‹ã‚¿ãƒ¼ãŒã‚ã‚Œã°ã€ãã‚Œãã‚ŒãŒ screen ã«å¯¾å¿œã—ã¾ã™ã€‚

> A set of screens for a single user with one keyboard and one pointer (usually a mouse) is called a display.

display ã¯ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã¨ãƒã‚¦ã‚¹ã€ãã—ã¦ screen ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã§ã™ã€‚æ™®é€šã€Œãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã€ã¨ã„ã£ãŸã‚‰ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’æƒ³åƒã™ã‚‹ã¨æ€ã†ã®ã§ã€X11ã®ç”¨èªã¨ã—ã¦ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

ã“ã‚Œã‚‰ã®ç”¨èªã¯ã€ç’°å¢ƒå¤‰æ•° `$DISPLAY` ã«ã‚‚ç¾ã‚Œã¾ã™ã€‚ä»•æ§˜ã«ã‚ˆã‚‹ã¨ã€`$DISPLAY` ã¯ä»¥ä¸‹ã®å½¢å¼ã§ã™ã€‚

> On POSIX-conformant systems, the display name or DISPLAY environment variable can be a string in the format: protocol/hostname:number.screen_number

å½¢å¼ã«ã¤ã„ã¦ã¾ã¨ã‚ã‚‹ã¨ã€ä¸‹è¨˜ã®é€šã‚Šã§ã™ã€‚

- `protocol` : ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ•ã‚¡ãƒŸãƒªãƒ¼ (çœç•¥å¯)
- `hostname` : ãƒ›ã‚¹ãƒˆå (çœç•¥å¯)
- `number` : ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚µãƒ¼ãƒãƒ¼ç•ªå·
- `screen_number` : ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ç•ªå·

ãŸã¨ãˆã°ã€`$DISPLAY` ãŒ `:2` ã®å ´åˆã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã§èµ·å‹•ã—ã¦ã„ã‚‹Xãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚µãƒ¼ãƒãƒ¼2ç•ªã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ (0) ã‚’æ„å‘³ã—ã¾ã™ã€‚

ç¾ä»£ã§ã¯ã€ãƒ¢ãƒ‹ã‚¿ãƒ¼ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã§ã‚‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ (0) ãŒä½¿ç”¨ã•ã‚Œã¾ã™ (ã—ã€çœç•¥ã•ã‚Œã¾ã™)ã€‚å®šç¾©ã«å¾“ãˆã°ãƒ¢ãƒ‹ã‚¿ãƒ¼æ¯ã«ç•°ãªã‚‹ç•ªå·ã«ãªã‚‹ã¯ãšã§ã™ãŒã€å®Ÿéš›ã«ã¯ 0 ã ã‘ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã™ã€‚

ä»¥ä¸‹ã§ã¯ã€ã“ã®ç†ç”±ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€X11ã®ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œã®æ­´å²ã‚’è¦‹ã¦ã„ãã¾ã™ã€‚

---

## 1 Screen = 1 ãƒ¢ãƒ‹ã‚¿ãƒ¼ã®æ™‚ä»£

æ˜”ã®X11ã§ã¯ã€ãƒ¢ãƒ‹ã‚¿ãƒ¼ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€ãã‚Œã‚‰ã‚’ãã‚Œãã‚Œã® screen ã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã¨ãˆã°ã€`:0.0` (ãƒ©ãƒƒãƒ—ãƒˆãƒƒãƒ—ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼) ã¨ `:0.1` (å¤–éƒ¨ãƒ¢ãƒ‹ã‚¿ãƒ¼) ã¨ã„ã†å…·åˆã§ã™ã€‚

ã“ã®æ™‚ä»£ã®å¤§ããªå•é¡Œã¯ã€screen é–“ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ç§»å‹•ã§ããªã‹ã£ãŸã“ã¨ã§ã™ã€‚å„ screen ãŒç‹¬è‡ªã® root window ã‚’æŒã¤ãŸã‚ã€[X11 Protocolã®ä»•æ§˜](https://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html)ã«ã‚ˆã‚‹ã¨ã€ReparentWindow ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ä»¥ä¸‹ã®åˆ¶ç´„ãŒã‚ã‚Šã¾ã—ãŸã€‚

> A Match error is generated if: The new parent is not on the same screen as the old parent.

ã¤ã¾ã‚Šã€screen é–“ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ç§»å‹•ã™ã‚‹ã“ã¨ã¯ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ¬ãƒ™ãƒ«ã§ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

## Xinerama ã§å¤‰ã‚ã£ãŸ screen ã®æ‰±ã„

ã“ã®ä¸ä¾¿ãªçŠ¶æ³ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€[XineramaãŒDECã‹ã‚‰ç™»å ´ã—ã¾ã—ãŸ](https://en.wikipedia.org/wiki/Xinerama)ã€‚1990å¹´ä»£ä¸­ç›¤ã€œå¾ŒåŠã®ã“ã¨ã§ã™ã€‚

XineramaãŒã‚„ã£ãŸã“ã¨ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã€è¤‡æ•°ã®ç‰©ç†ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’1ã¤ã®ä»®æƒ³ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã¨ã—ã¦è¦‹ã›ã‹ã‘ã‚‹ã€ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ãŸã¨ãˆã°ã€1920x1080ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼2å°ã‚’æ¨ªã«ä¸¦ã¹ã¦ã„ãŸã¨ã—ã¦ã€Xã‚µãƒ¼ãƒãƒ¼ã¯ã€Œ3840x1080ã®1ã¤ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ã€ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ä¼ãˆã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã¯ root window ãŒ1ã¤ã—ã‹ãªã„ã‚ˆã†ã«è¦‹ãˆã€å˜ä¸€ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒ screen é–“ã‚’ã¾ãŸã„ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãŸã ã—ã€Xineramaã«ã¯å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚è¨­å®šãŒé™çš„ã§ã€ç‰©ç†ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’æŠœãå·®ã—ã™ã‚‹ãŸã³ã«Xã‚µãƒ¼ãƒãƒ¼ã®è¨­å®šã‚’æ›¸ãã‹ãˆã¦å†èµ·å‹•ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã§ã—ãŸã€‚

---

## RandR ã«ã‚ˆã‚‹å‹•çš„ãªå¯¾å¿œ

ã“ã®å•é¡Œã‚’è§£æ±ºã—ãŸã®ãŒ RandR 1.2 ã§ã™ã€‚

RandR ã¯å…ƒã€…ã€ç”»é¢ã®ãƒªã‚µã‚¤ã‚ºã¨å›è»¢ã®ãŸã‚ã«é–‹ç™ºã•ã‚Œã¾ã—ãŸã€‚[freedesktop.orgã®è¨˜äº‹](https://nouveau.freedesktop.org/MultiMonitorDesktop.html)ã«ã‚ˆã‚‹ã¨ã€Version 1.2 ã§ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œãŒè¿½åŠ ã•ã‚Œã€Xinerama ã¨åŒã˜ã‚ˆã†ã«ã€è¤‡æ•°ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’1ã¤ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã¨ã—ã¦æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

> Randr exposes the dual-head card as a single SCREEN, yet having a standard way of managing the multiple monitors.

ã•ã‚‰ã«ã€[X11R7.3ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ](https://www.x.org/archive/X11R7.3/doc/RELNOTES.txt)ã«ã‚ˆã‚‹ã¨ã€

> Also new in the X Server since X11R7.2 is the 1.2 version of the RandR
> extension, which allows for runtime configuration of outputs within X Screens
> and an improved static configuration system for multihead in a RandR 1.2
> environment.

ã¨ã‚ã‚Šã€1.2ã§ runtime configuration ã«å¯¾å¿œã—ãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

---

## ã¾ã¨ã‚

ã“ã®è¨˜äº‹ã§ã¯ã€X11ã® screen ã¨ displayã€ãã—ã¦ãƒãƒ«ãƒãƒ¢ãƒ‹ã‚¿ãƒ¼å¯¾å¿œã®æ­´å²ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚

screen ã¯å…ƒã€…ç‰©ç†ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’æŒ‡ã—ã¦ã„ã¾ã—ãŸãŒã€Xinerama ã‚„ RandR ã«ã‚ˆã‚Šè¤‡æ•°ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’å«ã‚€ä»®æƒ³ screen ã¸ã¨å¤‰åŒ–ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€screen é–“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç§»å‹•ãŒå¯èƒ½ã«ãªã‚Šã€ãƒ¢ãƒ‹ã‚¿ãƒ¼ã®æŠœãå·®ã—ã«ã‚‚å‹•çš„ã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

ç¾ä»£ã® X11 ã§ screen_number ãŒ 0 ãªã®ã¯ã€ã“ã†ã—ãŸæ­´å²çš„çµŒç·¯ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚

---

## å‚è€ƒ

- [Xlib - C Language X Interface](https://www.x.org/releases/X11R7.6/doc/libX11/specs/libX11/libX11.html)
- [X Window System Protocol](https://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html)
- [X11R7.3 Release Notes](https://www.x.org/archive/X11R7.3/doc/RELNOTES.txt)
- [Multi-Monitor Desktop (freedesktop.org)](https://nouveau.freedesktop.org/MultiMonitorDesktop.html)
- [Xinerama - Wikipedia](https://en.wikipedia.org/wiki/Xinerama)

---

ã“ã®è¨˜äº‹ãŒå½¹ç«‹ã£ãŸã‚‰ã€LIKEã‚„ã‚³ãƒ¡ãƒ³ãƒˆã§æ•™ãˆã¦ãã ã•ã„ï¼

ä»–ã®æŠ€è¡“è¨˜äº‹ã‚„é–‹ç™ºè¨˜éŒ²ã¯[ç§ã®ãƒ–ãƒ­ã‚°](https://d-matsui.github.io/)ã§ã‚‚å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
